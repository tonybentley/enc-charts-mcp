<!DOCTYPE html>
<html>
<head>
    <title>ENC Depth-Based Coastlines</title>
    <style>
        body { 
            margin: 0; 
            padding: 20px; 
            font-family: Arial, sans-serif;
            background: #f0f0f0;
        }
        .container {
            max-width: 1200px;
            margin: 0 auto;
        }
        .legend {
            background: white;
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 20px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        .legend-item {
            display: inline-block;
            margin-right: 20px;
            margin-bottom: 10px;
        }
        .legend-color {
            display: inline-block;
            width: 20px;
            height: 3px;
            margin-right: 8px;
            vertical-align: middle;
        }
        canvas { 
            display: block;
            border: 3px solid #333;
            background: white;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }
        .stats {
            background: white;
            padding: 15px;
            border-radius: 8px;
            margin-top: 20px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="legend">
            <h2>ENC Depth-Based Coastline Extraction</h2>
            <p><strong>Target:</strong> Shelter Island, San Diego Bay (32.714935°, -117.228975°)</p>
            <div class="legend-item">
                <span class="legend-color" style="background: #FF6B6B; height: 4px;"></span>
                <span>DEPCNT (0m contours)</span>
            </div>
            <div class="legend-item">
                <span class="legend-color" style="background: #4ECDC4; height: 4px;"></span>
                <span>DEPARE (0m boundaries)</span>
            </div>
            <div class="legend-item">
                <span class="legend-color" style="background: #45B7D1; height: 4px;"></span>
                <span>COALNE (coastlines)</span>
            </div>
            <div class="legend-item">
                <span class="legend-color" style="background: #96CEB4; height: 4px;"></span>
                <span>SLCONS (construction)</span>
            </div>
            <div class="legend-item">
                <span class="legend-color" style="background: #FFEAA7; height: 4px;"></span>
                <span>Other sources</span>
            </div>
        </div>
        
        <canvas id="map" width="900" height="700"></canvas>
        
        <div class="stats" id="stats">
            <h3>Extraction Statistics</h3>
            <div id="feature-breakdown"></div>
        </div>
    </div>
    
    <script>
        const coastlineData = {
  "type": "FeatureCollection",
  "features": [
    {
      "type": "Feature",
      "geometry": {
        "type": "LineString",
        "coordinates": [
          [
            -117.1054383,
            32.6511375,
            0
          ],
          [
            -117.105446,
            32.6511645,
            0
          ],
          [
            -117.1054917,
            32.6512344,
            0
          ],
          [
            -117.1055035,
            32.651281,
            0
          ],
          [
            -117.1055145,
            32.6513246,
            0
          ],
          [
            -117.1054839,
            32.6514013,
            0
          ],
          [
            -117.1055833,
            32.6514598,
            0
          ],
          [
            -117.1057053,
            32.65178,
            0
          ],
          [
            -117.1057435,
            32.6519581,
            0
          ],
          [
            -117.105774,
            32.6521408,
            0
          ],
          [
            -117.1058196,
            32.6523324,
            0
          ],
          [
            -117.105854,
            32.6524026,
            0
          ],
          [
            -117.1059037,
            32.6525037,
            0
          ],
          [
            -117.1059876,
            32.6526638,
            0
          ],
          [
            -117.1060791,
            32.6528712,
            0
          ],
          [
            -117.106186,
            32.6531056,
            0
          ],
          [
            -117.1062623,
            32.6533401,
            0
          ],
          [
            -117.1063308,
            32.6535498,
            0
          ],
          [
            -117.1064072,
            32.6538316,
            0
          ],
          [
            -117.1064911,
            32.6540977,
            0
          ],
          [
            -117.106575,
            32.6543344,
            0
          ],
          [
            -117.1066588,
            32.6544832,
            0
          ],
          [
            -117.106697,
            32.654641,
            0
          ],
          [
            -117.1067733,
            32.6545823,
            0
          ],
          [
            -117.1068422,
            32.6545214,
            0
          ],
          [
            -117.1069412,
            32.6545371,
            0
          ],
          [
            -117.1070404,
            32.6545077,
            0
          ],
          [
            -117.107155,
            32.654458,
            0
          ],
          [
            -117.1072466,
            32.6543925,
            0
          ],
          [
            -117.1072509,
            32.6543898,
            0
          ],
          [
            -117.1073455,
            32.6543315,
            0
          ],
          [
            -117.1074447,
            32.6542818,
            0
          ],
          [
            -117.1075286,
            32.6542208,
            0
          ],
          [
            -117.1074219,
            32.6541984,
            0
          ],
          [
            -117.1072997,
            32.6542368,
            0
          ],
          [
            -117.1072767,
            32.6542445,
            0
          ],
          [
            -117.1071318,
            32.6542933,
            0
          ],
          [
            -117.1069869,
            32.6543498,
            0
          ],
          [
            -117.1068877,
            32.6543995,
            0
          ],
          [
            -117.1068193,
            32.6543545,
            0
          ],
          [
            -117.1067735,
            32.6542125,
            0
          ],
          [
            -117.1067276,
            32.6540231,
            0
          ],
          [
            -117.1066514,
            32.6538202,
            0
          ],
          [
            -117.1066283,
            32.6537097,
            0
          ],
          [
            -117.1067581,
            32.6536374,
            0
          ],
          [
            -117.1068573,
            32.6535065,
            0
          ],
          [
            -117.1067656,
            32.653484,
            0
          ],
          [
            -117.1065674,
            32.6535406,
            0
          ],
          [
            -117.1065217,
            32.6534504,
            0
          ],
          [
            -117.1064378,
            32.6532633,
            0
          ],
          [
            -117.1063155,
            32.6529544,
            0
          ],
          [
            -117.1062699,
            32.6527786,
            0
          ],
          [
            -117.1062468,
            32.6526839,
            0
          ],
          [
            -117.1063384,
            32.6526026,
            0
          ],
          [
            -117.1062546,
            32.6524877,
            0
          ],
          [
            -117.1063005,
            32.6524087,
            0
          ],
          [
            -117.106407,
            32.6523206,
            0
          ],
          [
            -117.106308,
            32.6522869,
            0
          ],
          [
            -117.1061937,
            32.6522712,
            0
          ],
          [
            -117.106041,
            32.6521653,
            0
          ],
          [
            -117.1059798,
            32.6520346,
            0
          ],
          [
            -117.105919,
            32.6519016,
            0
          ],
          [
            -117.1058426,
            32.6517866,
            0
          ],
          [
            -117.105774,
            32.6515815,
            0
          ],
          [
            -117.1057283,
            32.6514733,
            0
          ],
          [
            -117.1057205,
            32.6513673,
            0
          ],
          [
            -117.1057967,
            32.6513018,
            0
          ],
          [
            -117.1059342,
            32.6512385,
            0
          ],
          [
            -117.1060028,
            32.6511844,
            0
          ],
          [
            -117.1059035,
            32.6511574,
            0
          ],
          [
            -117.1057586,
            32.6511868,
            0
          ],
          [
            -117.1056519,
            32.6511801,
            0
          ],
          [
            -117.1056062,
            32.6511238,
            0
          ],
          [
            -117.1056138,
            32.6510652,
            0
          ],
          [
            -117.10528548,
            32.65115144
          ],
          [
            -117.10513266000001,
            32.65116538
          ],
          [
            -117.10497984,
            32.65117932
          ],
          [
            -117.10482702,
            32.65119326
          ],
          [
            -117.1043305,
            32.6503044,
            0
          ],
          [
            -117.1046742,
            32.6512072,
            0
          ]
        ]
      },
      "properties": {
        "type": "coastline",
        "subType": "mainland",
        "source": "explicit",
        "sourceFeatures": [
          "COALNE"
        ],
        "length_m": 1371.1777671020131,
        "length_nm": 0.7403767640939596,
        "orientation": 153.75251494135773,
        "startPoint": [
          -117.1054383,
          32.6511375
        ],
        "endPoint": [
          -117.1046742,
          32.6512072
        ],
        "waterSide": "unknown",
        "simplified": false,
        "continuous": false,
        "gapCount": 0,
        "stitched": true
      }
    },
    {
      "type": "Feature",
      "geometry": {
        "type": "LineString",
        "coordinates": [
          [
            -117.2240412,
            32.7148901,
            0
          ],
          [
            -117.223625,
            32.7151321,
            0
          ]
        ]
      },
      "properties": {
        "type": "coastline",
        "subType": "pier",
        "source": "explicit",
        "sourceFeatures": [
          "COALNE"
        ],
        "length_m": 47.331572507429016,
        "length_nm": 0.025557004593644177,
        "orientation": 55.352414132815625,
        "startPoint": [
          -117.2240412,
          32.7148901
        ],
        "endPoint": [
          -117.223625,
          32.7151321
        ],
        "waterSide": "right",
        "simplified": false,
        "continuous": false,
        "gapCount": 0,
        "stitched": true
      }
    },
    {
      "type": "Feature",
      "geometry": {
        "type": "LineString",
        "coordinates": [
          [
            -117.2152478,
            32.728008,
            0
          ],
          [
            -117.2152425,
            32.728027,
            0
          ],
          [
            -117.2152346,
            32.7280549,
            0
          ],
          [
            -117.2151594,
            32.7283215,
            0
          ],
          [
            -117.2151488,
            32.7283552,
            0
          ]
        ]
      },
      "properties": {
        "type": "coastline",
        "subType": "pier",
        "source": "explicit",
        "sourceFeatures": [
          "COALNE"
        ],
        "length_m": 39.70325369512334,
        "length_nm": 0.02143804195201044,
        "orientation": 13.693602285660404,
        "startPoint": [
          -117.2152478,
          32.728008
        ],
        "endPoint": [
          -117.2151488,
          32.7283552
        ],
        "waterSide": "unknown",
        "simplified": false,
        "continuous": false,
        "gapCount": 0,
        "stitched": true
      }
    },
    {
      "type": "Feature",
      "geometry": {
        "type": "LineString",
        "coordinates": [
          [
            -117.1968535,
            32.7146377,
            0
          ],
          [
            -117.1967696,
            32.7146807,
            0
          ],
          [
            -117.196662,
            32.7147035,
            0
          ],
          [
            -117.1966579,
            32.714704,
            0
          ],
          [
            -117.1966419,
            32.7147057,
            0
          ],
          [
            -117.1965712,
            32.7147035,
            0
          ],
          [
            -117.1965669,
            32.7146919,
            0
          ],
          [
            -117.1965484,
            32.7146427,
            0
          ]
        ]
      },
      "properties": {
        "type": "coastline",
        "subType": "mainland",
        "source": "explicit",
        "sourceFeatures": [
          "COALNE"
        ],
        "length_m": 35.17655921190979,
        "length_nm": 0.018993822468633795,
        "orientation": 99.57728282105006,
        "startPoint": [
          -117.1968535,
          32.7146377
        ],
        "endPoint": [
          -117.1965484,
          32.7146427
        ],
        "waterSide": "left",
        "simplified": false,
        "continuous": false,
        "gapCount": 0,
        "stitched": true
      }
    },
    {
      "type": "Feature",
      "geometry": {
        "type": "LineString",
        "coordinates": [
          [
            -117.2375182,
            32.7019855,
            0
          ],
          [
            -117.2375563,
            32.7020148,
            0
          ],
          [
            -117.2375947,
            32.7020485,
            0
          ],
          [
            -117.2375792,
            32.7020959,
            0
          ],
          [
            -117.2375412,
            32.7020847,
            0
          ],
          [
            -117.2375108,
            32.7020803,
            0
          ],
          [
            -117.2374802,
            32.7020984,
            0
          ],
          [
            -117.2374665,
            32.7021105,
            0
          ],
          [
            -117.2373811,
            32.7021865,
            0
          ],
          [
            -117.2373809,
            32.7022347,
            0
          ],
          [
            -117.2373809,
            32.7022361,
            0
          ],
          [
            -117.2373679,
            32.7022434,
            0
          ],
          [
            -117.2373123,
            32.7022746,
            0
          ],
          [
            -117.2372685,
            32.7023393,
            0
          ],
          [
            -117.2372588,
            32.7023536,
            0
          ],
          [
            -117.2372133,
            32.7024078,
            0
          ],
          [
            -117.2371675,
            32.7024846,
            0
          ],
          [
            -117.2371599,
            32.7025184,
            0
          ],
          [
            -117.2370834,
            32.702584,
            0
          ],
          [
            -117.2370529,
            32.702663,
            0
          ],
          [
            -117.2370296,
            32.7027137,
            0
          ]
        ]
      },
      "properties": {
        "type": "coastline",
        "subType": "mainland",
        "source": "explicit",
        "sourceFeatures": [
          "COALNE"
        ],
        "length_m": 108.73093580885869,
        "length_nm": 0.058710008536100804,
        "orientation": 30.311512339085425,
        "startPoint": [
          -117.2375182,
          32.7019855
        ],
        "endPoint": [
          -117.2370296,
          32.7027137
        ],
        "waterSide": "right",
        "simplified": false,
        "continuous": false,
        "gapCount": 0,
        "stitched": true
      }
    },
    {
      "type": "Feature",
      "geometry": {
        "type": "LineString",
        "coordinates": [
          [
            -117.2335956,
            32.6865479,
            0
          ],
          [
            -117.2336185,
            32.6865457,
            0
          ],
          [
            -117.2336676,
            32.6865409,
            0
          ],
          [
            -117.2336975,
            32.686529,
            0
          ],
          [
            -117.2337021,
            32.6865272,
            0
          ],
          [
            -117.2337361,
            32.6865056,
            0
          ],
          [
            -117.2337446,
            32.6864933,
            0
          ],
          [
            -117.2337572,
            32.686475,
            0
          ],
          [
            -117.2337784,
            32.6864557,
            0
          ],
          [
            -117.2338207,
            32.6864303,
            0
          ],
          [
            -117.2338725,
            32.6863978,
            0
          ],
          [
            -117.2339203,
            32.6863549,
            0
          ],
          [
            -117.2339888,
            32.6862975,
            0
          ],
          [
            -117.2340244,
            32.6862646,
            0
          ],
          [
            -117.234045,
            32.6862537,
            0
          ],
          [
            -117.2340729,
            32.6862462,
            0
          ],
          [
            -117.234089,
            32.6862424,
            0
          ],
          [
            -117.2341068,
            32.6862363,
            0
          ],
          [
            -117.2341163,
            32.6862264,
            0
          ],
          [
            -117.2341267,
            32.6862106,
            0
          ],
          [
            -117.2341308,
            32.6862043,
            0
          ],
          [
            -117.2341514,
            32.686185,
            0
          ],
          [
            -117.2341777,
            32.6861653,
            0
          ],
          [
            -117.234192,
            32.6861573,
            0
          ],
          [
            -117.2342111,
            32.6861466,
            0
          ],
          [
            -117.2342115,
            32.6861464,
            0
          ]
        ]
      },
      "properties": {
        "type": "coastline",
        "subType": "mainland",
        "source": "explicit",
        "sourceFeatures": [
          "COALNE"
        ],
        "length_m": 75.22130709226911,
        "length_nm": 0.04061625652930298,
        "orientation": 232.84296581658077,
        "startPoint": [
          -117.2335956,
          32.6865479
        ],
        "endPoint": [
          -117.2342115,
          32.6861464
        ],
        "waterSide": "right",
        "simplified": false,
        "continuous": false,
        "gapCount": 0,
        "stitched": true
      }
    },
    {
      "type": "Feature",
      "geometry": {
        "type": "LineString",
        "coordinates": [
          [
            -117.1636276,
            32.6884642,
            0
          ],
          [
            -117.1636437,
            32.6884473,
            0
          ],
          [
            -117.1636826,
            32.6884064,
            0
          ],
          [
            -117.1636955,
            32.6883927,
            0
          ],
          [
            -117.163765,
            32.6883197,
            0
          ]
        ]
      },
      "properties": {
        "type": "coastline",
        "subType": "pier",
        "source": "explicit",
        "sourceFeatures": [
          "COALNE"
        ],
        "length_m": 20.57938977680684,
        "length_nm": 0.011111981520954016,
        "orientation": 218.62451203390208,
        "startPoint": [
          -117.1636276,
          32.6884642
        ],
        "endPoint": [
          -117.163765,
          32.6883197
        ],
        "waterSide": "unknown",
        "simplified": false,
        "continuous": false,
        "gapCount": 0,
        "stitched": true
      }
    },
    {
      "type": "Feature",
      "geometry": {
        "type": "LineString",
        "coordinates": [
          [
            -117.1996841,
            32.7147144,
            0
          ],
          [
            -117.1995163,
            32.7146833,
            0
          ],
          [
            -117.1993104,
            32.7146274,
            0
          ]
        ]
      },
      "properties": {
        "type": "coastline",
        "subType": "pier",
        "source": "explicit",
        "sourceFeatures": [
          "COALNE"
        ],
        "length_m": 36.316447129760256,
        "length_nm": 0.019609312705054133,
        "orientation": 105.15321296961258,
        "startPoint": [
          -117.1996841,
          32.7147144
        ],
        "endPoint": [
          -117.1993104,
          32.7146274
        ],
        "waterSide": "left",
        "simplified": false,
        "continuous": false,
        "gapCount": 0,
        "stitched": true
      }
    },
    {
      "type": "Feature",
      "geometry": {
        "type": "LineString",
        "coordinates": [
          [
            -117.1033871,
            32.6463832,
            0
          ],
          [
            -117.1033879,
            32.6463838,
            0
          ],
          [
            -117.1034179,
            32.6464079,
            0
          ],
          [
            -117.1034492,
            32.646404,
            0
          ],
          [
            -117.1034927,
            32.6463721,
            0
          ],
          [
            -117.1035234,
            32.6463467,
            0
          ],
          [
            -117.103592,
            32.6463016,
            0
          ],
          [
            -117.1037216,
            32.6463015,
            0
          ],
          [
            -117.1038742,
            32.6462968,
            0
          ],
          [
            -117.1040801,
            32.6462718,
            0
          ],
          [
            -117.1041948,
            32.6462966,
            0
          ],
          [
            -117.1041719,
            32.6464161,
            0
          ],
          [
            -117.1041913,
            32.6464777,
            0
          ],
          [
            -117.1042555,
            32.6466821,
            0
          ],
          [
            -117.1042176,
            32.6467701,
            0
          ],
          [
            -117.104332,
            32.6468422,
            0
          ],
          [
            -117.1044082,
            32.6470632,
            0
          ],
          [
            -117.1044617,
            32.647212,
            0
          ],
          [
            -117.1045151,
            32.6472502,
            0
          ],
          [
            -117.1046372,
            32.6474306,
            0
          ],
          [
            -117.1047972,
            32.6477439,
            0
          ],
          [
            -117.1047516,
            32.6480755,
            0
          ],
          [
            -117.1048051,
            32.64824,
            0
          ],
          [
            -117.1049806,
            32.6484181,
            0
          ],
          [
            -117.1052628,
            32.6490019,
            0
          ],
          [
            -117.1054076,
            32.6496581,
            0
          ],
          [
            -117.1053009,
            32.6498837,
            0
          ],
          [
            -117.1051968,
            32.6499281,
            0
          ],
          [
            -117.1051395,
            32.6499585,
            0
          ],
          [
            -117.1050261,
            32.6500237,
            0
          ]
        ]
      },
      "properties": {
        "type": "coastline",
        "subType": "mainland",
        "source": "explicit",
        "sourceFeatures": [
          "COALNE"
        ],
        "length_m": 543.0531373848879,
        "length_nm": 0.29322523616894597,
        "orientation": 326.4014906569153,
        "startPoint": [
          -117.1033871,
          32.6463832
        ],
        "endPoint": [
          -117.1050261,
          32.6500237
        ],
        "waterSide": "unknown",
        "simplified": false,
        "continuous": false,
        "gapCount": 0,
        "stitched": true
      }
    },
    {
      "type": "Feature",
      "geometry": {
        "type": "LineString",
        "coordinates": [
          [
            -117.2477108,
            32.6782211,
            0
          ],
          [
            -117.2476885,
            32.6782149,
            0
          ],
          [
            -117.2476705,
            32.678215,
            0
          ],
          [
            -117.2475951,
            32.678226,
            0
          ],
          [
            -117.2475845,
            32.6782322,
            0
          ],
          [
            -117.2475857,
            32.6782444,
            0
          ],
          [
            -117.2476035,
            32.6782621,
            0
          ],
          [
            -117.2476426,
            32.6782795,
            0
          ],
          [
            -117.2476845,
            32.6783039,
            0
          ],
          [
            -117.2476877,
            32.6783058,
            0
          ],
          [
            -117.247715,
            32.6783131,
            0
          ],
          [
            -117.2477408,
            32.6783084,
            0
          ],
          [
            -117.247753,
            32.6782977,
            0
          ],
          [
            -117.2477583,
            32.6782814,
            0
          ],
          [
            -117.2477557,
            32.6782634,
            0
          ],
          [
            -117.2477468,
            32.6782468,
            0
          ],
          [
            -117.2477296,
            32.6782312,
            0
          ],
          [
            -117.2477108,
            32.6782211,
            0
          ]
        ]
      },
      "properties": {
        "type": "coastline",
        "subType": "island",
        "source": "explicit",
        "sourceFeatures": [
          "COALNE"
        ],
        "length_m": 42.64288262819167,
        "length_nm": 0.02302531459405598,
        "orientation": 198.79754990008936,
        "startPoint": [
          -117.2477108,
          32.6782211
        ],
        "endPoint": [
          -117.2477108,
          32.6782211
        ],
        "waterSide": "unknown",
        "simplified": false,
        "continuous": true,
        "gapCount": 0,
        "stitched": true
      }
    },
    {
      "type": "Feature",
      "geometry": {
        "type": "LineString",
        "coordinates": [
          [
            -117.2273893,
            32.723993,
            0
          ],
          [
            -117.2273919,
            32.7239876,
            0
          ],
          [
            -117.2275336,
            32.7236916,
            0
          ],
          [
            -117.2275721,
            32.7236188,
            0
          ]
        ]
      },
      "properties": {
        "type": "coastline",
        "subType": "pier",
        "source": "explicit",
        "sourceFeatures": [
          "COALNE"
        ],
        "length_m": 44.99062762979081,
        "length_nm": 0.0242929954804486,
        "orientation": 202.65744295768343,
        "startPoint": [
          -117.2273893,
          32.723993
        ],
        "endPoint": [
          -117.2275721,
          32.7236188
        ],
        "waterSide": "left",
        "simplified": false,
        "continuous": false,
        "gapCount": 0,
        "stitched": true
      }
    },
    {
      "type": "Feature",
      "geometry": {
        "type": "LineString",
        "coordinates": [
          [
            -117.1166765,
            32.644734,
            0
          ],
          [
            -117.1166534,
            32.6446348,
            0
          ],
          [
            -117.1166916,
            32.6445919,
            0
          ],
          [
            -117.1166765,
            32.6444588,
            0
          ],
          [
            -117.1166304,
            32.6444251,
            0
          ],
          [
            -117.1165161,
            32.6443891,
            0
          ],
          [
            -117.1164858,
            32.6443666,
            0
          ],
          [
            -117.116501,
            32.6443102,
            0
          ],
          [
            -117.1164702,
            32.6442177,
            0
          ],
          [
            -117.1164245,
            32.6441569,
            0
          ],
          [
            -117.1163942,
            32.6441614,
            0
          ],
          [
            -117.1163712,
            32.6441276,
            0
          ],
          [
            -117.1163102,
            32.6441051,
            0
          ],
          [
            -117.1162948,
            32.6440848,
            0
          ],
          [
            -117.1162414,
            32.6440398,
            0
          ],
          [
            -117.1161958,
            32.6440398,
            0
          ],
          [
            -117.1161498,
            32.6440038,
            0
          ],
          [
            -117.1160584,
            32.64397,
            0
          ],
          [
            -117.1159516,
            32.6440423,
            0
          ],
          [
            -117.1159286,
            32.644101,
            0
          ],
          [
            -117.1158676,
            32.6440694,
            0
          ],
          [
            -117.115822,
            32.6440763,
            0
          ],
          [
            -117.1157607,
            32.6440966,
            0
          ],
          [
            -117.1157074,
            32.6440876,
            0
          ],
          [
            -117.1157073,
            32.6439974,
            0
          ],
          [
            -117.1156845,
            32.6439275,
            0
          ],
          [
            -117.115654,
            32.6438035,
            0
          ],
          [
            -117.1156616,
            32.6437268,
            0
          ],
          [
            -117.1156539,
            32.6436885,
            0
          ],
          [
            -117.1155855,
            32.6436006,
            0
          ],
          [
            -117.1154936,
            32.6434293,
            0
          ],
          [
            -117.1154099,
            32.6433211,
            0
          ],
          [
            -117.1153638,
            32.6432825,
            0
          ],
          [
            -117.1153238,
            32.6432376,
            0
          ],
          [
            -117.1152588,
            32.6431983,
            0
          ],
          [
            -117.115209,
            32.6431717,
            0
          ],
          [
            -117.1151127,
            32.6431461,
            0
          ],
          [
            -117.1150645,
            32.6431404,
            0
          ],
          [
            -117.1149958,
            32.6431323,
            0
          ],
          [
            -117.1149097,
            32.6431204,
            0
          ],
          [
            -117.1148682,
            32.6431119,
            0
          ]
        ]
      },
      "properties": {
        "type": "coastline",
        "subType": "mainland",
        "source": "explicit",
        "sourceFeatures": [
          "COALNE"
        ],
        "length_m": 312.8230920936722,
        "length_nm": 0.16891095685403465,
        "orientation": 131.02098791439266,
        "startPoint": [
          -117.1166765,
          32.644734
        ],
        "endPoint": [
          -117.1148682,
          32.6431119
        ],
        "waterSide": "unknown",
        "simplified": false,
        "continuous": false,
        "gapCount": 0,
        "stitched": true
      }
    },
    {
      "type": "Feature",
      "geometry": {
        "type": "LineString",
        "coordinates": [
          [
            -117.2079163,
            32.7360689,
            0
          ],
          [
            -117.2080613,
            32.7359085,
            0
          ],
          [
            -117.2082749,
            32.7356714,
            0
          ],
          [
            -117.2083205,
            32.7356375,
            0
          ],
          [
            -117.2083739,
            32.7356374,
            0
          ],
          [
            -117.2084657,
            32.735511,
            0
          ],
          [
            -117.2085418,
            32.7354274,
            0
          ],
          [
            -117.2085645,
            32.7354086,
            0
          ],
          [
            -117.2086181,
            32.7353641,
            0
          ],
          [
            -117.208664,
            32.7353054,
            0
          ],
          [
            -117.2087325,
            32.7352534,
            0
          ],
          [
            -117.2087862,
            32.7352173,
            0
          ],
          [
            -117.2088777,
            32.7351382,
            0
          ],
          [
            -117.2089079,
            32.735093,
            0
          ],
          [
            -117.2089105,
            32.7350889,
            0
          ],
          [
            -117.2089309,
            32.7350569,
            0
          ],
          [
            -117.2089311,
            32.7350005,
            0
          ],
          [
            -117.2089464,
            32.7349825,
            0
          ]
        ]
      },
      "properties": {
        "type": "coastline",
        "subType": "mainland",
        "source": "explicit",
        "sourceFeatures": [
          "COALNE"
        ],
        "length_m": 158.57152386280512,
        "length_nm": 0.08562177314406325,
        "orientation": 219.25674926873302,
        "startPoint": [
          -117.2079163,
          32.7360689
        ],
        "endPoint": [
          -117.2089464,
          32.7349825
        ],
        "waterSide": "unknown",
        "simplified": false,
        "continuous": false,
        "gapCount": 0,
        "stitched": true
      }
    },
    {
      "type": "Feature",
      "geometry": {
        "type": "LineString",
        "coordinates": [
          [
            -117.2446697,
            32.6667788,
            0
          ],
          [
            -117.2446605,
            32.6667758,
            0
          ],
          [
            -117.2446524,
            32.6667659,
            0
          ],
          [
            -117.2446393,
            32.6667499,
            0
          ],
          [
            -117.2446313,
            32.6667023,
            0
          ],
          [
            -117.2446311,
            32.6667009,
            0
          ],
          [
            -117.2446284,
            32.6666743,
            0
          ],
          [
            -117.244642,
            32.6666332,
            0
          ]
        ]
      },
      "properties": {
        "type": "coastline",
        "subType": "mainland",
        "source": "explicit",
        "sourceFeatures": [
          "COALNE"
        ],
        "length_m": 17.636068183410437,
        "length_nm": 0.009522715001841488,
        "orientation": 160.1907513380254,
        "startPoint": [
          -117.2446697,
          32.6667788
        ],
        "endPoint": [
          -117.244642,
          32.6666332
        ],
        "waterSide": "unknown",
        "simplified": false,
        "continuous": false,
        "gapCount": 0,
        "stitched": true
      }
    },
    {
      "type": "Feature",
      "geometry": {
        "type": "LineString",
        "coordinates": [
          [
            -117.1577531,
            32.6742504,
            0
          ],
          [
            -117.1578216,
            32.6741669,
            0
          ],
          [
            -117.1580047,
            32.6740156,
            0
          ],
          [
            -117.1581575,
            32.6738959,
            0
          ],
          [
            -117.158249,
            32.6738236,
            0
          ],
          [
            -117.1583329,
            32.6737626,
            0
          ],
          [
            -117.1584091,
            32.6737219,
            0
          ],
          [
            -117.1584474,
            32.673679,
            0
          ],
          [
            -117.15847,
            32.6736406,
            0
          ],
          [
            -117.158493,
            32.673618,
            0
          ]
        ]
      },
      "properties": {
        "type": "coastline",
        "subType": "pier",
        "source": "explicit",
        "sourceFeatures": [
          "COALNE"
        ],
        "length_m": 99.44775525011693,
        "length_nm": 0.05369749203570028,
        "orientation": 222.74971414709466,
        "startPoint": [
          -117.1577531,
          32.6742504
        ],
        "endPoint": [
          -117.158493,
          32.673618
        ],
        "waterSide": "unknown",
        "simplified": false,
        "continuous": false,
        "gapCount": 0,
        "stitched": true
      }
    },
    {
      "type": "Feature",
      "geometry": {
        "type": "LineString",
        "coordinates": [
          [
            -117.2378851,
            32.6782279,
            0
          ],
          [
            -117.2378774,
            32.6783397,
            0
          ],
          [
            -117.2378731,
            32.678398,
            0
          ],
          [
            -117.237862,
            32.6784504,
            0
          ],
          [
            -117.2378466,
            32.6785439,
            0
          ],
          [
            -117.2378462,
            32.678548,
            0
          ],
          [
            -117.2378409,
            32.678596,
            0
          ],
          [
            -117.2378391,
            32.6786106,
            0
          ],
          [
            -117.2378332,
            32.678657,
            0
          ],
          [
            -117.2378251,
            32.6786968,
            0
          ],
          [
            -117.2378114,
            32.6787424,
            0
          ],
          [
            -117.2378068,
            32.6787735,
            0
          ],
          [
            -117.2378024,
            32.6788026,
            0
          ],
          [
            -117.2378047,
            32.6788855,
            0
          ],
          [
            -117.2378,
            32.6789646,
            0
          ],
          [
            -117.237792,
            32.6790718,
            0
          ],
          [
            -117.2377851,
            32.6791565,
            0
          ],
          [
            -117.2377826,
            32.6792369,
            0
          ],
          [
            -117.2377817,
            32.6792528,
            0
          ],
          [
            -117.2377755,
            32.6793643,
            0
          ],
          [
            -117.2377656,
            32.6795134,
            0
          ],
          [
            -117.2377647,
            32.6795261,
            0
          ],
          [
            -117.2377678,
            32.6795305,
            0
          ],
          [
            -117.2377695,
            32.679533,
            0
          ],
          [
            -117.2377798,
            32.6795478,
            0
          ],
          [
            -117.2377806,
            32.6795479,
            0
          ],
          [
            -117.2378099,
            32.6795528,
            0
          ]
        ]
      },
      "properties": {
        "type": "coastline",
        "subType": "mainland",
        "source": "explicit",
        "sourceFeatures": [
          "COALNE"
        ],
        "length_m": 150.69182170534035,
        "length_nm": 0.0813670743549354,
        "orientation": 356.13649812027523,
        "startPoint": [
          -117.2378851,
          32.6782279
        ],
        "endPoint": [
          -117.2378099,
          32.6795528
        ],
        "waterSide": "unknown",
        "simplified": false,
        "continuous": false,
        "gapCount": 0,
        "stitched": true
      }
    },
    {
      "type": "Feature",
      "geometry": {
        "type": "LineString",
        "coordinates": [
          [
            -117.1852493,
            32.7283669,
            0
          ],
          [
            -117.1852381,
            32.7283682,
            0
          ],
          [
            -117.1851503,
            32.7283783,
            0
          ],
          [
            -117.1849214,
            32.7283336,
            0
          ],
          [
            -117.1847915,
            32.7282819,
            0
          ],
          [
            -117.1847176,
            32.7282577,
            0
          ],
          [
            -117.1846543,
            32.7282374,
            0
          ],
          [
            -117.184639,
            32.7282325,
            0
          ],
          [
            -117.1845626,
            32.728192,
            0
          ],
          [
            -117.1845094,
            32.7281199,
            0
          ],
          [
            -117.1845016,
            32.7280568,
            0
          ],
          [
            -117.1845073,
            32.7280478,
            0
          ],
          [
            -117.1845475,
            32.7279846,
            0
          ],
          [
            -117.1846314,
            32.7279213,
            0
          ],
          [
            -117.1846389,
            32.7278288,
            0
          ],
          [
            -117.1846543,
            32.7277138,
            0
          ],
          [
            -117.1847458,
            32.7276234,
            0
          ],
          [
            -117.1847533,
            32.7275129,
            0
          ]
        ]
      },
      "properties": {
        "type": "coastline",
        "subType": "mainland",
        "source": "explicit",
        "sourceFeatures": [
          "COALNE"
        ],
        "length_m": 153.32810288074222,
        "length_nm": 0.08279055231141588,
        "orientation": 150.9434002821347,
        "startPoint": [
          -117.1852493,
          32.7283669
        ],
        "endPoint": [
          -117.1847533,
          32.7275129
        ],
        "waterSide": "unknown",
        "simplified": false,
        "continuous": false,
        "gapCount": 0,
        "stitched": true
      }
    },
    {
      "type": "Feature",
      "geometry": {
        "type": "LineString",
        "coordinates": [
          [
            -117.1223959,
            32.6031626,
            0
          ],
          [
            -117.1223938,
            32.6031244,
            0
          ],
          [
            -117.1223851,
            32.6030868,
            0
          ],
          [
            -117.1223829,
            32.6030798,
            0
          ],
          [
            -117.1223672,
            32.6030297,
            0
          ],
          [
            -117.1223673,
            32.6030283,
            0
          ],
          [
            -117.1223682,
            32.6029885,
            0
          ],
          [
            -117.1223685,
            32.6029748,
            0
          ],
          [
            -117.1223689,
            32.6029575,
            0
          ],
          [
            -117.122368,
            32.6029518,
            0
          ],
          [
            -117.1223639,
            32.6029235,
            0
          ],
          [
            -117.1223625,
            32.6029141,
            0
          ],
          [
            -117.1223588,
            32.6028886,
            0
          ],
          [
            -117.122358,
            32.6028833,
            0
          ],
          [
            -117.1223576,
            32.6028802,
            0
          ],
          [
            -117.1223561,
            32.602878,
            0
          ],
          [
            -117.1223323,
            32.6028425,
            0
          ],
          [
            -117.1223123,
            32.6028128,
            0
          ],
          [
            -117.122305,
            32.6028002,
            0
          ],
          [
            -117.1223025,
            32.602796,
            0
          ],
          [
            -117.1222781,
            32.6027544,
            0
          ],
          [
            -117.1222778,
            32.6027536,
            0
          ],
          [
            -117.1222705,
            32.6027345,
            0
          ],
          [
            -117.1222643,
            32.602718,
            0
          ],
          [
            -117.1222644,
            32.6027172,
            0
          ],
          [
            -117.1222715,
            32.6026819,
            0
          ],
          [
            -117.122275,
            32.6026647,
            0
          ],
          [
            -117.1222759,
            32.6026628,
            0
          ],
          [
            -117.1222986,
            32.6026153,
            0
          ],
          [
            -117.1222989,
            32.6026147,
            0
          ],
          [
            -117.1223239,
            32.6025857,
            0
          ],
          [
            -117.1223262,
            32.602583,
            0
          ],
          [
            -117.1223351,
            32.6025545,
            0
          ],
          [
            -117.1223358,
            32.6025522,
            0
          ],
          [
            -117.1223364,
            32.6025505,
            0
          ],
          [
            -117.1223435,
            32.6025311,
            0
          ],
          [
            -117.1223455,
            32.6025256,
            0
          ],
          [
            -117.1223496,
            32.6025144,
            0
          ],
          [
            -117.1223502,
            32.6025135,
            0
          ],
          [
            -117.1223822,
            32.6024648,
            0
          ],
          [
            -117.1223872,
            32.602458,
            0
          ],
          [
            -117.1224107,
            32.6024264,
            0
          ],
          [
            -117.1224154,
            32.6024201,
            0
          ],
          [
            -117.1224385,
            32.6023892,
            0
          ],
          [
            -117.1224457,
            32.6023796,
            0
          ],
          [
            -117.1224566,
            32.6023529,
            0
          ],
          [
            -117.1224617,
            32.6023404,
            0
          ],
          [
            -117.122464,
            32.6023294,
            0
          ],
          [
            -117.1224671,
            32.6023147,
            0
          ],
          [
            -117.1224685,
            32.6023085,
            0
          ],
          [
            -117.1224648,
            32.6022802,
            0
          ],
          [
            -117.1224629,
            32.6022776,
            0
          ],
          [
            -117.1224469,
            32.6022555,
            0
          ],
          [
            -117.1224282,
            32.6022379,
            0
          ],
          [
            -117.1224082,
            32.6022191,
            0
          ],
          [
            -117.1224068,
            32.6022179,
            0
          ],
          [
            -117.1223593,
            32.6021881,
            0
          ],
          [
            -117.1223559,
            32.6021859,
            0
          ],
          [
            -117.1223252,
            32.6021724,
            0
          ],
          [
            -117.1223179,
            32.6021691,
            0
          ],
          [
            -117.1223056,
            32.6021709,
            0
          ],
          [
            -117.1222799,
            32.6021747,
            0
          ],
          [
            -117.1222786,
            32.6021749,
            0
          ],
          [
            -117.1222615,
            32.6021794,
            0
          ],
          [
            -117.1222361,
            32.6021861,
            0
          ],
          [
            -117.1222339,
            32.6021867,
            0
          ],
          [
            -117.1222231,
            32.6021895,
            0
          ],
          [
            -117.122187,
            32.602204,
            0
          ],
          [
            -117.1221868,
            32.6022041,
            0
          ],
          [
            -117.1221851,
            32.6022047,
            0
          ],
          [
            -117.1221763,
            32.6022087,
            0
          ],
          [
            -117.1221492,
            32.6022211,
            0
          ],
          [
            -117.1221117,
            32.6022383,
            0
          ],
          [
            -117.1221093,
            32.6022394,
            0
          ],
          [
            -117.1220927,
            32.6022389,
            0
          ],
          [
            -117.1220898,
            32.6022388,
            0
          ],
          [
            -117.1220865,
            32.6022387,
            0
          ],
          [
            -117.1220606,
            32.602238,
            0
          ],
          [
            -117.1220592,
            32.6022373,
            0
          ],
          [
            -117.1220275,
            32.602221,
            0
          ],
          [
            -117.1220162,
            32.6022222,
            0
          ],
          [
            -117.1219855,
            32.6022256,
            0
          ],
          [
            -117.1219835,
            32.6022248,
            0
          ],
          [
            -117.1219366,
            32.6022074,
            0
          ],
          [
            -117.121936,
            32.6022072,
            0
          ],
          [
            -117.1219106,
            32.6022008,
            0
          ],
          [
            -117.1218848,
            32.6021942,
            0
          ],
          [
            -117.1218831,
            32.6021938,
            0
          ],
          [
            -117.1218602,
            32.6021879,
            0
          ],
          [
            -117.121828,
            32.6021837,
            0
          ],
          [
            -117.1218213,
            32.6021828,
            0
          ],
          [
            -117.1217952,
            32.6021793,
            0
          ],
          [
            -117.121787,
            32.6021748,
            0
          ],
          [
            -117.121773,
            32.602167,
            0
          ],
          [
            -117.1217438,
            32.6021507,
            0
          ]
        ]
      },
      "properties": {
        "type": "coastline",
        "subType": "mainland",
        "source": "explicit",
        "sourceFeatures": [
          "COALNE"
        ],
        "length_m": 181.63670093253964,
        "length_nm": 0.09807597242577734,
        "orientation": 146.68178762977107,
        "startPoint": [
          -117.1223959,
          32.6031626
        ],
        "endPoint": [
          -117.1217438,
          32.6021507
        ],
        "waterSide": "unknown",
        "simplified": false,
        "continuous": false,
        "gapCount": 0,
        "stitched": true
      }
    }
  ],
  "metadata": {
    "chartId": "US5CA72M",
    "processingStats": {
      "totalSegments": 18,
      "stitchedSegments": 18,
      "gaps": 612,
      "totalLength_m": 3439.0589448756673,
      "largestGap_m": 16935.30339079569,
      "averageGap_m": 7488.400659440863,
      "gapDistribution": {
        "under50m": 0,
        "under100m": 0,
        "under200m": 2,
        "over200m": 610
      },
      "filledGaps": 0
    },
    "sources": {
      "COALNE": {
        "count": 18,
        "totalLength_m": 3439.0589448756673
      }
    },
    "coverage": {
      "bounds": {
        "minLat": 32.6021507,
        "maxLat": 32.7360689,
        "minLon": -117.2477583,
        "maxLon": -117.1033871
      },
      "area_km2": 0
    }
  }
};
        
        const canvas = document.getElementById('map');
        const ctx = canvas.getContext('2d');
        
        // Map bounds focusing on Shelter Island area
        const bounds = {
            minLon: -117.25,
            maxLon: -117.20,
            minLat: 32.70,
            maxLat: 32.73
        };
        
        // Shelter Island location
        const shelterIsland = {
            lat: 32.714935,
            lon: -117.228975
        };
        
        // Color mapping by source feature
        const sourceColors = {
            'DEPCNT': '#FF6B6B',  // Red for depth contours
            'DEPARE': '#4ECDC4',  // Teal for depth areas
            'COALNE': '#45B7D1',  // Blue for coastlines
            'SLCONS': '#96CEB4',  // Green for construction
            'default': '#FFEAA7'  // Yellow for others
        };
        
        // Convert lat/lon to canvas coordinates
        function toCanvas(lon, lat) {
            const x = ((lon - bounds.minLon) / (bounds.maxLon - bounds.minLon)) * canvas.width;
            const y = canvas.height - ((lat - bounds.minLat) / (bounds.maxLat - bounds.minLat)) * canvas.height;
            return { x, y };
        }
        
        // Clear with water color
        ctx.fillStyle = '#E3F2FD';
        ctx.fillRect(0, 0, canvas.width, canvas.height);
        
        // Track feature counts by source
        const featureCounts = {};
        
        // Draw coastlines with color coding
        coastlineData.features.forEach(feature => {
            if (feature.geometry && feature.geometry.type === 'LineString') {
                const coords = feature.geometry.coordinates;
                if (coords && coords.length > 0) {
                    // Determine color based on primary source
                    const sources = feature.properties.sourceFeatures || [];
                    const primarySource = sources[0] || 'unknown';
                    const color = sourceColors[primarySource] || sourceColors.default;
                    
                    // Track counts
                    sources.forEach(source => {
                        featureCounts[source] = (featureCounts[source] || 0) + 1;
                    });
                    
                    // Draw the line
                    ctx.strokeStyle = color;
                    ctx.lineWidth = 3;
                    ctx.lineCap = 'round';
                    
                    // Add glow effect for depth contours
                    if (primarySource === 'DEPCNT') {
                        ctx.shadowColor = color;
                        ctx.shadowBlur = 6;
                    } else {
                        ctx.shadowBlur = 0;
                    }
                    
                    ctx.beginPath();
                    const firstPoint = toCanvas(coords[0][0], coords[0][1]);
                    ctx.moveTo(firstPoint.x, firstPoint.y);
                    
                    for (let i = 1; i < coords.length; i++) {
                        const point = toCanvas(coords[i][0], coords[i][1]);
                        ctx.lineTo(point.x, point.y);
                    }
                    
                    ctx.stroke();
                    ctx.shadowBlur = 0; // Reset shadow
                }
            }
        });
        
        // Draw Shelter Island marker
        const shelterPoint = toCanvas(shelterIsland.lon, shelterIsland.lat);
        ctx.fillStyle = 'white';
        ctx.beginPath();
        ctx.arc(shelterPoint.x, shelterPoint.y, 8, 0, 2 * Math.PI);
        ctx.fill();
        
        ctx.fillStyle = '#FF1744';
        ctx.beginPath();
        ctx.arc(shelterPoint.x, shelterPoint.y, 6, 0, 2 * Math.PI);
        ctx.fill();
        
        // Update statistics
        let statsHtml = '<h4>Feature Breakdown:</h4><ul>';
        Object.entries(featureCounts).forEach(([source, count]) => {
            statsHtml += `<li><strong>${source}:</strong> ${count} features</li>`;
        });
        statsHtml += '</ul>';
        
        document.getElementById('feature-breakdown').innerHTML = statsHtml;
    </script>
</body>
</html>